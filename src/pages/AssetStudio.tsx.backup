import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Checkbox } from "@/components/ui/checkbox";
import { Badge } from "@/components/ui/badge";
import {
  Upload,
  Wand2,
  Download,
  Eye,
  Calendar,
  Sparkles,
  CheckCircle2,
  ImageIcon,
  Zap,
  ShoppingBag,
  Hash,
  Video,
  Clock,
  Edit2,
  ArrowRight
} from "lucide-react";
import { useNavigate } from "react-router-dom";

const AssetStudioPage = () => {
  const navigate = useNavigate();
  const [selectedImage, setSelectedImage] = useState<string | null>(null);
  const [selectedFeatures, setSelectedFeatures] = useState<string[]>([]);
  const [isProcessing, setIsProcessing] = useState(false);
  const [showResults, setShowResults] = useState(false);
  const [contentType, setContentType] = useState<"detail" | "feed" | "reels" | "story" | null>(null);
  const [productName, setProductName] = useState("");
  const [keywords, setKeywords] = useState(["", "", ""]);
  const [editableCopy, setEditableCopy] = useState<{
    title: string;
    description: string;
    feature1: string;
    feature2: string;
    feature3: string;
    feature4: string;
    hashtags: string;
    cta: string;
  } | null>(null);
  const [isEditing, setIsEditing] = useState(false);
  const [showFinalImage, setShowFinalImage] = useState(false);
  const [currentStep, setCurrentStep] = useState(1);
  const [showCopyGeneration, setShowCopyGeneration] = useState(false);

  // Sample product features for bedding/curtain business
  const productFeatures = [
    { id: "summer_cool", label: "ì—¬ë¦„ìš© ëƒ‰ê°", popular: true },
    { id: "custom_size", label: "ì‚¬ì´ì¦ˆ ë§ì¶¤ ì œì‘", popular: true },
    { id: "antibacterial", label: "í•­ê·  ì²˜ë¦¬" },
    { id: "hypoallergenic", label: "ì•Œë ˆë¥´ê¸° ë°©ì§€" },
    { id: "easy_wash", label: "ì„¸íƒ ê°„í¸" },
    { id: "eco_friendly", label: "ì¹œí™˜ê²½ ì†Œì¬" },
    { id: "fire_resistant", label: "ë‚œì—° ì²˜ë¦¬" },
    { id: "blackout", label: "ì•”ë§‰ ê¸°ëŠ¥" }
  ];

  // Mock feature expansion based on keywords
  const expandKeyword = (keyword: string): string => {
    const expansions: Record<string, string> = {
      "ëƒ‰ê° ì†Œì¬": "íŠ¹ìˆ˜ ëƒ‰ê° ì›ë‹¨ìœ¼ë¡œ ì œì‘ë˜ì–´ í•œì—¬ë¦„ì—ë„ ì‹œì›í•˜ê³  ì¾Œì í•œ ìˆ˜ë©´ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤",
      "ì—¬ë¦„ íŠ¹í™”": "í†µê¸°ì„±ì´ ë›°ì–´ë‚œ ì†Œì¬ë¡œ ì—¬ë¦„ì²  ì—´ëŒ€ì•¼ì—ë„ í¸ì•ˆí•œ ì ìë¦¬ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤",
      "ë§ì¶¤ ì œì‘": "ê³ ê°ë‹˜ì˜ ì¹¨ëŒ€ ì‚¬ì´ì¦ˆì— ì™„ë²½í•˜ê²Œ ë§ì¶° ì œì‘ë˜ì–´ í˜ëŸ¬ë‚´ë¦¼ ì—†ì´ ê¹”ë”í•©ë‹ˆë‹¤",
      "í”„ë¦¬ë¯¸ì—„ ëƒ‰ê° ì†Œì¬": "ìµœê³ ê¸‰ ëƒ‰ê° ì›ë‹¨ì„ ì‚¬ìš©í•˜ì—¬ ì²´ì˜¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¡°ì ˆí•˜ê³  ë•€ í¡ìˆ˜ê°€ ë¹ ë¦…ë‹ˆë‹¤",
      "êµ­ë‚´ì‚° ì›ë‹¨": "100% êµ­ë‚´ ìƒì‚° ì›ë‹¨ìœ¼ë¡œ í’ˆì§ˆì´ ìš°ìˆ˜í•˜ê³  ì•ˆì „ì„±ì´ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤",
      "í•­ê·  ì²˜ë¦¬": "íŠ¹ìˆ˜ í•­ê·  ê°€ê³µìœ¼ë¡œ ì„¸ê·  ë²ˆì‹ì„ ì–µì œí•˜ì—¬ ìœ„ìƒì ì¸ ìˆ˜ë©´ í™˜ê²½ì„ ë§Œë“­ë‹ˆë‹¤"
    };
    return expansions[keyword] || `${keyword} ê¸°ëŠ¥ìœ¼ë¡œ ë”ìš± í¸ì•ˆí•˜ê³  ë§Œì¡±ìŠ¤ëŸ¬ìš´ ì‚¬ìš©ê°ì„ ì œê³µí•©ë‹ˆë‹¤`;
  };

  // Mock auto-generated copy based on selected features and content type
  const generateCopy = () => {
    let titles: string[], descriptions: string[], hashtags: string[], ctas: string[];

    switch (contentType) {
      case "detail":
        // ìƒí’ˆ ìƒì„¸ì˜ ê²½ìš° ì…ë ¥ëœ ì •ë³´ í™œìš©
        const validKeywords = keywords.filter(k => k.trim() !== "");
        const keywordString = validKeywords.length > 0 ? validKeywords.join(", ") : "í”„ë¦¬ë¯¸ì—„ í’ˆì§ˆ";

        titles = [
          productName ? `âœ¨ ${productName} ìƒì„¸ ì •ë³´` : "âœ¨ ìƒí’ˆ ìƒì„¸ ì •ë³´",
          productName ? `ğŸ“ ${productName} - ${keywordString}` : "ğŸ“ í”„ë¦¬ë¯¸ì—„ ì œí’ˆ ìƒì„¸",
          productName ? `ğŸ›¡ï¸ ${productName} íŠ¹ì§• ì•ˆë‚´` : "ğŸ›¡ï¸ ì œí’ˆ íŠ¹ì§• ì•ˆë‚´"
        ];

        descriptions = validKeywords.length > 0 ? [
          `â–¶ ${productName || "ì œí’ˆëª…"}\n${validKeywords.map((kw, idx) => `â–¶ íŠ¹ì§• ${idx + 1}: ${kw}`).join('\n')}\nâ–¶ ê³ ê° ë§Œì¡±ë„: â˜…â˜…â˜…â˜…â˜…\nâ–¶ ë°°ì†¡: ì „êµ­ ë¬´ë£Œë°°ì†¡`,
          `â–¶ ì œí’ˆ íŠ¹ì§•\n${validKeywords.map((kw, idx) => `${idx + 1}. ${kw} ê¸°ëŠ¥ íƒ‘ì¬`).join('\n')}\nâ–¶ A/S: 1ë…„ ë¬´ìƒ ë³´ì¦\nâ–¶ êµ¬ë§¤ ë¬¸ì˜: ì¹´í†¡/ì „í™” ìƒë‹´ ê°€ëŠ¥`,
          `â–¶ ${productName || "í”„ë¦¬ë¯¸ì—„ ì œí’ˆ"}\n- í•µì‹¬ ê¸°ëŠ¥: ${keywordString}\n- í’ˆì§ˆ ì¸ì¦ ì™„ë£Œ\n- ì•ˆì „ ê²€ì¦ ì œí’ˆ\n- ê³ ê° ì¶”ì²œ 1ìœ„`
        ] : [
          "â–¶ í”„ë¦¬ë¯¸ì—„ í’ˆì§ˆì˜ ì œí’ˆ\nâ–¶ ì—„ì„ ëœ ì†Œì¬ ì‚¬ìš©\nâ–¶ ì² ì €í•œ í’ˆì§ˆ ê´€ë¦¬\nâ–¶ ê³ ê° ë§Œì¡± ë³´ì¥",
          "â–¶ ì œí’ˆ íŠ¹ì§•\n1. ìµœê³ ê¸‰ ì†Œì¬\n2. ì •ì„±ìŠ¤ëŸ° ì œì‘\n3. ì™„ë²½í•œ ë§ˆê°\n4. í•©ë¦¬ì  ê°€ê²©",
          "â–¶ í’ˆì§ˆ ë³´ì¦\n- ì •í’ˆ ì¸ì¦\n- ì•ˆì „ í…ŒìŠ¤íŠ¸ ì™„ë£Œ\n- 1ë…„ ë¬´ìƒ A/S\n- 100% ê³ ê° ë§Œì¡±"
        ];
        break;

      case "feed":
        titles = [
          "ì‹œì›í•œ ì—¬ë¦„ë°¤ì„ ì±…ì„ì§€ëŠ” ëƒ‰ê° ì´ë¶ˆ ğŸ§Š",
          "ìš°ë¦¬ ì§‘ ë”± ë§ëŠ” ì‚¬ì´ì¦ˆë¡œ ë§ì¶¤ ì œì‘ âœ‚ï¸",
          "ê±´ê°•í•œ ì ìë¦¬, í•­ê·  ì²˜ë¦¬ëœ í”„ë¦¬ë¯¸ì—„ ì¹¨êµ¬ ğŸ›¡ï¸"
        ];
        descriptions = [
          "ë”ìš´ ì—¬ë¦„ë°¤ë„ ì‹œì›í•˜ê²Œ! íŠ¹ìˆ˜ ëƒ‰ê° ì›ë‹¨ìœ¼ë¡œ ë§Œë“  ì´ë¶ˆë¡œ ìˆ™ë©´ì„ ê²½í—˜í•´ë³´ì„¸ìš”. í•­ê·  ì²˜ë¦¬ê¹Œì§€ ì™„ë£Œë˜ì–´ ìœ„ìƒì ì´ê³  ì•ˆì „í•´ìš”.",
          "ì¼ë°˜ ì‚¬ì´ì¦ˆê°€ ë§ì§€ ì•Šë‚˜ìš”? ê³ ê°ë‹˜ì˜ ì¹¨ëŒ€ì— ë”± ë§ëŠ” ì‚¬ì´ì¦ˆë¡œ ë§ì¶¤ ì œì‘í•´ë“œë¦½ë‹ˆë‹¤. 20ë…„ ê²½ë ¥ì˜ ìˆ™ë ¨ëœ ì¥ì¸ì´ ì§ì ‘ ì œì‘í•´ìš”.",
          "ë§¤ì¼ ì‚¬ìš©í•˜ëŠ” ì¹¨êµ¬, ê¹¨ë—í•˜ê³  ì•ˆì „í•´ì•¼ì£ . í•­ê·  ì²˜ë¦¬ëœ ì›ë‹¨ìœ¼ë¡œ ì„¸ê·  ê±±ì • ì—†ì´ í¸ì•ˆí•œ ì ìë¦¬ë¥¼ ë§Œë“¤ì–´ë“œë ¤ìš”."
        ];
        break;

      case "reels":
        titles = [
          "ğŸ¬ 3ì´ˆë§Œì— ë³´ëŠ” ëƒ‰ê° ì´ë¶ˆ íš¨ê³¼!",
          "âœ‚ï¸ ë§ì¶¤ ì œì‘ ê³¼ì • ëŒ€ê³µê°œ",
          "ğŸ›¡ï¸ í•­ê·  ì¹¨êµ¬ê°€ í•„ìš”í•œ ì´ìœ "
        ];
        descriptions = [
          "ğŸ’¨ ë°”ëŒë§Œ ìŠ¤ì³ë„ ì‹œì›í•œ ëƒ‰ê° ì´ë¶ˆ!\n\nâœ… ì—¬ë¦„ì²  í•„ìˆ˜í…œ\nâœ… ì—ì–´ì»¨ ë¹„ìš© ì ˆê°\nâœ… ìˆ™ë©´ ë³´ì¥\n\nğŸµ ë” ìì„¸í•œ ì •ë³´ëŠ” í”„ë¡œí•„ ë§í¬!",
          "ğŸ¥ ìš°ë¦¬ ê°€ê²Œ ë§ì¶¤ ì œì‘ ê³¼ì •\n\n0:00 - ê³ ê° ìƒë‹´\n0:05 - ì‚¬ì´ì¦ˆ ì¸¡ì •\n0:10 - ì›ë‹¨ ì¬ë‹¨\n0:15 - ì™„ì„±!\n\nğŸ“² DMìœ¼ë¡œ ìƒë‹´í•˜ì„¸ìš”",
          "ğŸ˜± ì¹¨êµ¬ì— ì„¸ê· ì´?\n\në§¤ì¼ 8ì‹œê°„ í•¨ê»˜í•˜ëŠ” ì¹¨êµ¬\ní•­ê·  ì²˜ë¦¬ëŠ” ì„ íƒì´ ì•„ë‹Œ í•„ìˆ˜!\n\nğŸ’ª ìš°ë¦¬ ê°€ê²Œ ëª¨ë“  ì œí’ˆ í•­ê·  ì¸ì¦"
        ];
        break;

      case "story":
        titles = [
          "ğŸ”¥ ì˜¤ëŠ˜ë§Œ íŠ¹ê°€!",
          "ğŸ“ ë§¤ì¥ ë°©ë¬¸ ì´ë²¤íŠ¸",
          "â° ë§ˆê° ì„ë°•!"
        ];
        descriptions = [
          "ìŠ¤í† ë¦¬ ë³´ì‹  ë¶„ë“¤ë§Œ!\n\nëƒ‰ê° ì´ë¶ˆ 20% í• ì¸\nì„ ì°©ìˆœ 10ëª…\n\nDMìœ¼ë¡œ 'ìŠ¤í† ë¦¬' ë³´ë‚´ì£¼ì„¸ìš” ğŸ",
          "ì˜¤ëŠ˜ ë§¤ì¥ ë°©ë¬¸í•˜ì‹œë©´?\n\nâ˜• ì‹œì›í•œ ìŒë£Œ ì„œë¹„ìŠ¤\nğŸ ë¯¸ë‹ˆ ì¿ ì…˜ ì¦ì •\nğŸ“ ë¬´ë£Œ ì‚¬ì´ì¦ˆ ìƒë‹´\n\nì˜ì—…ì‹œê°„: 10:00-20:00",
          "â° 6ì‹œê°„ ë‚¨ì•˜ì–´ìš”!\n\ní•­ê·  ì´ë¶ˆ ì„¸íŠ¸\nì •ê°€ 150,000ì› â†’ 99,000ì›\n\nì§€ê¸ˆ ë°”ë¡œ ì—°ë½ì£¼ì„¸ìš” ğŸ“"
        ];
        break;

      default:
        titles = ["ì œí’ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”"];
        descriptions = ["ì½˜í…ì¸  íƒ€ì…ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”"];
    }

    hashtags = contentType === "story"
      ? ["#ì§€ìˆ™ì»¤íŠ¼ì¹¨êµ¬ #ì˜¤ëŠ˜ë§ŒíŠ¹ê°€ #ìŠ¤í† ë¦¬ì´ë²¤íŠ¸"]
      : [
        "#ëƒ‰ê°ì´ë¶ˆë§›ì§‘ #ì—¬ë¦„ì¹¨êµ¬ #ì‹œì›í•œì´ë¶ˆ #ì§€ìˆ™ì»¤íŠ¼ì¹¨êµ¬",
        "#ë§ì¶¤ì œì‘ #ì‚¬ì´ì¦ˆì£¼ë¬¸ì œì‘ #ì¹¨êµ¬ë§ì¶¤ #ì»¤íŠ¼ë§ì¶¤",
        "#í•­ê· ì¹¨êµ¬ #ê±´ê°•í•œì ìë¦¬ #í”„ë¦¬ë¯¸ì—„ì¹¨êµ¬ #ì•ˆì „í•œì¹¨êµ¬"
      ];

    ctas = contentType === "story"
      ? ["ğŸ‘† ìœ„ë¡œ ìŠ¤ì™€ì´í”„í•´ì„œ ë”ë³´ê¸°"]
      : [
        "ğŸ“ ì§€ê¸ˆ ì£¼ë¬¸í•˜ê³  ì‹œì›í•œ ì—¬ë¦„ ë³´ë‚´ì„¸ìš”!",
        "ğŸ’¬ ì‚¬ì´ì¦ˆ ìƒë‹´ ë°›ì•„ë³´ì„¸ìš” (ë¬´ë£Œ)",
        "ğŸ›’ ê±´ê°•í•œ ì ìë¦¬, ì§€ê¸ˆ ì‹œì‘í•˜ì„¸ìš”!"
      ];

    const randomIndex = Math.floor(Math.random() * titles.length);

    // Generate features for detail content type
    let features: { feature1: string; feature2: string; feature3: string; feature4: string } = {
      feature1: "",
      feature2: "",
      feature3: "",
      feature4: ""
    };

    if (contentType === "detail") {
      const expandedFeatures = keywords.map(kw => kw.trim() ? expandKeyword(kw) : "").filter(f => f);

      // ê¸°ë³¸ featuresê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì œê³µ
      if (expandedFeatures.length === 0) {
        expandedFeatures.push(
          "ìµœê³ ê¸‰ ëƒ‰ê° ì›ë‹¨ì„ ì‚¬ìš©í•˜ì—¬ ì²´ì˜¨ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¡°ì ˆí•˜ê³  ë•€ í¡ìˆ˜ê°€ ë¹ ë¦…ë‹ˆë‹¤.",
          "100% êµ­ë‚´ ìƒì‚° ì›ë‹¨ìœ¼ë¡œ í’ˆì§ˆì´ ìš°ìˆ˜í•˜ê³  ì•ˆì „ì„±ì´ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.",
          "ê³ ê°ë‹˜ì˜ ì¹¨ëŒ€ ì‚¬ì´ì¦ˆì— ì™„ë²½í•˜ê²Œ ë§ì¶° ì œì‘ë˜ì–´ í˜ëŸ¬ë‚´ë¦¼ ì—†ì´ ê¹”ë”í•©ë‹ˆë‹¤."
        );
      }

      features.feature1 = expandedFeatures[0] || "";
      features.feature2 = expandedFeatures[1] || "";
      features.feature3 = expandedFeatures[2] || "";
      features.feature4 = expandedFeatures[3] || "";
    }

    return {
      title: titles[randomIndex],
      description: descriptions[randomIndex],
      ...features,
      hashtags: hashtags[randomIndex],
      cta: ctas[randomIndex]
    };
  };

  const mockGeneratedCopy = generateCopy();

  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        setSelectedImage(e.target?.result as string);
      };
      reader.readAsDataURL(file);
    }
  };

  const handleFeatureToggle = (featureId: string) => {
    setSelectedFeatures(prev =>
      prev.includes(featureId)
        ? prev.filter(id => id !== featureId)
        : [...prev, featureId]
    );
  };

  const handleGenerate = () => {
    if (!contentType) {
      alert("ë¨¼ì € ì½˜í…ì¸  íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
      return;
    }
    setIsProcessing(true);
    // Simulate processing time
    setTimeout(() => {
      setIsProcessing(false);
      setShowResults(true);
      // Generate and set editable copy
      const generatedCopy = generateCopy();
      setEditableCopy(generatedCopy);
    }, 2000);
  };

  const handleContentTypeSelect = (type: "detail" | "feed" | "reels" | "story") => {
    setContentType(type);
    setShowResults(false); // Reset results when changing content type
  };

  const handleSaveToCalendar = () => {
    // Save generated content to localStorage
    const generatedContent = {
      id: Date.now(),
      image: selectedImage,
      copy: mockGeneratedCopy,
      features: selectedFeatures,
      createdAt: new Date().toISOString()
    };

    const existingContent = JSON.parse(localStorage.getItem('generatedContent') || '[]');
    localStorage.setItem('generatedContent', JSON.stringify([...existingContent, generatedContent]));

    navigate('/calendar');
  };

  return (
    <div className="min-h-screen bg-gradient-warm">
      <div className="container mx-auto px-4 py-8">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-3xl md:text-4xl font-bold mb-2">ë§ˆì¼€íŒ… ì—ì…‹ ìƒì„±í•˜ê¸°</h1>
          <p className="text-lg text-muted-foreground">
            ìƒí’ˆ ì‚¬ì§„ì„ ë§ˆì¼€íŒ… ìë£Œë¡œ ìë™ ë³€í™˜ í›„ ì—…ë¡œë“œ ì˜ˆì•½ê¹Œì§€ ì™„ë£Œí•˜ì„¸ìš”.
          </p>
        </div>

        {/* Content Type Selection */}
        <div className="mb-8">
          <h2 className="text-lg font-semibold mb-4">ì–´ë–¤ ì½˜í…ì¸ ë¥¼ ë§Œë“œì‹œê² ì–´ìš”?</h2>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            <Button
              variant={contentType === "detail" ? "default" : "outline"}
              onClick={() => handleContentTypeSelect("detail")}
              className={`h-auto flex-col p-4 space-y-2 ${contentType === "detail" ? "gradient-primary text-white" : ""}`}
            >
              <ShoppingBag className="h-8 w-8" />
              <span className="font-medium">ìƒí’ˆ ìƒì„¸ ì´ë¯¸ì§€</span>
              <span className="text-xs opacity-80">ê°ì¢… ì‡¼í•‘ëª° ì—…ë¡œë“œìš© ìƒì„¸í˜ì´ì§€</span>
            </Button>

            <Button
              variant={contentType === "feed" ? "default" : "outline"}
              onClick={() => handleContentTypeSelect("feed")}
              className={`h-auto flex-col p-4 space-y-2 ${contentType === "feed" ? "gradient-primary text-white" : ""}`}
            >
              <Hash className="h-8 w-8" />
              <span className="font-medium">ì¸ìŠ¤íƒ€ í”¼ë“œ</span>
              <span className="text-xs opacity-80">ì¸ìŠ¤íƒ€ í”¼ë“œì— ì˜¬ë¼ê°ˆ ì •ë°©í˜• ì´ë¯¸ì§€</span>
            </Button>

            <Button
              variant={contentType === "reels" ? "default" : "outline"}
              onClick={() => handleContentTypeSelect("reels")}
              className={`h-auto flex-col p-4 space-y-2 ${contentType === "reels" ? "gradient-primary text-white" : ""}`}
            >
              <Video className="h-8 w-8" />
              <span className="font-medium">ì¸ìŠ¤íƒ€ ë¦´ìŠ¤</span>
              <span className="text-xs opacity-80">ì¸ìŠ¤íƒ€ ì—…ë¡œë“œìš© ì§§ì€ ë™ì˜ìƒ</span>
            </Button>

            <Button
              variant={contentType === "story" ? "default" : "outline"}
              onClick={() => handleContentTypeSelect("story")}
              className={`h-auto flex-col p-4 space-y-2 ${contentType === "story" ? "gradient-primary text-white" : ""}`}
            >
              <Clock className="h-8 w-8" />
              <span className="font-medium">ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬</span>
              <span className="text-xs opacity-80">24ì‹œê°„ ë™ì•ˆë§Œ ìœ ì§€ë˜ëŠ” ì¸ìŠ¤íƒ€ ê²Œì‹œë¬¼</span>
            </Button>
          </div>
        </div>

        {/* Step Progress Indicator */}
        {contentType && (
          <div className="mb-8">
            <div className="flex items-center justify-center space-x-4">
              {[1, 2, 3].map((step) => (
                <div key={step} className="flex items-center">
                  <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${step === currentStep ? "bg-primary text-white" :
                    step < currentStep ? "bg-success text-white" :
                      "bg-muted text-muted-foreground"
                    }`}>
                    {step < currentStep ? "âœ“" : step}
                  </div>
                  {step < 3 && (
                    <div className={`w-12 h-1 mx-2 ${step < currentStep ? "bg-success" : "bg-muted"
                      }`} />
                  )}
                </div>
              ))}
            </div>
            <div className="text-center mt-2 text-sm text-muted-foreground">
              {currentStep === 1 && "ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ë³´ì •"}
              {currentStep === 2 && "ìƒí’ˆ ì •ë³´ ì…ë ¥ ë° ë¬¸êµ¬ ìƒì„±"}
              {currentStep === 3 && "ìµœì¢… ìƒì„¸ ì´ë¯¸ì§€ í™•ì¸"}
            </div>
          </div>
        )}

        {/* Step 1: Image Upload and Processing */}
        {currentStep === 1 && contentType && (
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {/* Left Panel - Upload & Settings */}
            <div className="space-y-6">
              {/* Image Upload */}
              <Card className="card-soft">
                <CardHeader>
                  <CardTitle className="text-xl flex items-center">
                    <ImageIcon className="mr-2 h-6 w-6" />
                    ìƒí’ˆ ì‚¬ì§„ ì—…ë¡œë“œ
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  {!selectedImage ? (
                    <label className="block border-2 border-dashed â€¦ text-center p-8 cursor-pointer hover:border-primary">
                      <Upload className="mx-auto h-12 w-12 text-muted-foreground mb-4" />
                      <div className="space-y-2">
                        <p className="text-lg font-medium">ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                        <p className="text-sm text-muted-foreground">
                          JPG, PNG íŒŒì¼ (ìµœëŒ€ 10MB)
                        </p>
                      </div>
                      <input
                        type="file"
                        accept="image/*"
                        onChange={handleImageUpload}
                        className="sr-only"
                      />
                    </label>
                  ) : (
                    <div className="space-y-4">
                      <div className="w-full h-64 bg-gray-50 rounded-lg flex items-center justify-center">
                        <img
                          src={selectedImage}
                          alt="ì—…ë¡œë“œëœ ìƒí’ˆ"
                          className="max-w-full max-h-full object-contain rounded-lg"
                        />
                      </div>
                      <Button
                        variant="outline"
                        onClick={() => setSelectedImage(null)}
                        className="w-full"
                      >
                        ë‹¤ë¥¸ ì´ë¯¸ì§€ ì„ íƒ
                      </Button>
                    </div>
                  )}
                </CardContent>
              </Card>

              {/* Background Enhancement */}
              {selectedImage && contentType && (
                <Card className="card-soft">
                  <CardHeader>
                    <CardTitle className="text-xl flex items-center">
                      <Wand2 className="mr-2 h-6 w-6" />
                      ì´ë¯¸ì§€ ë³´ì • - {
                        contentType === "detail" ? "ìƒí’ˆ ìƒì„¸ìš©" :
                          contentType === "feed" ? "ì¸ìŠ¤íƒ€ í”¼ë“œìš©" :
                            contentType === "reels" ? "ë¦´ìŠ¤ ì¸ë„¤ì¼ìš©" :
                              "ìŠ¤í† ë¦¬ìš©"
                      }
                    </CardTitle>
                    <CardDescription>
                      {contentType === "detail" && "ê³ í•´ìƒë„ ìƒì„¸ ì´ë¯¸ì§€ë¡œ ë³€í™˜í•©ë‹ˆë‹¤"}
                      {contentType === "feed" && "1:1 ì •ë°©í˜• í”¼ë“œì— ìµœì í™”í•©ë‹ˆë‹¤"}
                      {contentType === "reels" && "9:16 ì„¸ë¡œí˜• ë¦´ìŠ¤ì— ë§ê²Œ ì¡°ì •í•©ë‹ˆë‹¤"}
                      {contentType === "story" && "ìŠ¤í† ë¦¬ ì „ìš© ì„¸ë¡œí˜•ìœ¼ë¡œ í¸ì§‘í•©ë‹ˆë‹¤"}
                    </CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <Button
                      className="w-full btn-large gradient-primary text-white"
                      onClick={handleGenerate}
                      disabled={isProcessing}
                    >
                      {isProcessing ? (
                        <>
                          <Sparkles className="mr-2 h-5 w-5 animate-spin" />
                          ì²˜ë¦¬ ì¤‘...
                        </>
                      ) : (
                        <>
                          <Zap className="mr-2 h-5 w-5" />
                          ìƒí’ˆ ì‚¬ì§„ ë³´ì •í•˜ê¸°
                        </>
                      )}
                    </Button>
                    <p className="text-sm text-muted-foreground text-center">
                      {contentType === "detail" && "ìƒí’ˆ íŠ¹ì§•ì´ ì˜ ë³´ì´ë„ë¡ ìµœì í™”í•©ë‹ˆë‹¤"}
                      {contentType === "feed" && "ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œì— ëˆˆì— ë„ë„ë¡ ë³´ì •í•©ë‹ˆë‹¤"}
                      {contentType === "reels" && "ë™ì˜ìƒ ì¸ë„¤ì¼ë¡œ ì‹œì„ ì„ ëŒë„ë¡ í¸ì§‘í•©ë‹ˆë‹¤"}
                      {contentType === "story" && "24ì‹œê°„ ìŠ¤í† ë¦¬ì— ìµœì í™”ëœ ë””ìì¸ì„ ì ìš©í•©ë‹ˆë‹¤"}
                    </p>
                  </CardContent>
                </Card>
              )}


              {/* Product Features for Other Content Types */}
              {selectedImage && contentType && contentType !== "detail" && (
                <Card className="card-soft">
                  <CardHeader>
                    <CardTitle className="text-xl">ê°•ì¡°í•  íŠ¹ì§• ì„ íƒ</CardTitle>
                    <CardDescription>
                      ì„ íƒí•˜ì‹  íŠ¹ì§•ì„ ë°”íƒ•ìœ¼ë¡œ ë§ˆì¼€íŒ… ë¬¸êµ¬ë¥¼ ìë™ ìƒì„±í•´ë“œë ¤ìš”
                    </CardDescription>
                  </CardHeader>
                  <CardContent>
                    <div className="grid grid-cols-2 gap-3">
                      {productFeatures.map((feature) => (
                        <div
                          key={feature.id}
                          className={`flex items-center space-x-3 p-3 rounded-lg border cursor-pointer transition-all ${selectedFeatures.includes(feature.id)
                            ? "bg-primary/10 border-primary"
                            : "bg-card border-border hover:border-primary/50"
                            }`}
                          onClick={() => handleFeatureToggle(feature.id)}
                        >
                          <Checkbox
                            checked={selectedFeatures.includes(feature.id)}
                            onChange={() => { }} // Handled by parent click
                          />
                          <div className="flex-1">
                            <span className="text-sm font-medium">{feature.label}</span>
                            {feature.popular && (
                              <Badge variant="secondary" className="ml-2 text-xs">
                                ì¸ê¸°
                              </Badge>
                            )}
                          </div>
                        </div>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              )}
            </div>

            {/* Right Panel - Results */}
            <div className="space-y-6">
              {showResults ? (
                <>
                  {/* Before/After Comparison */}
                  <Card className="card-soft">
                    <CardHeader>
                      <CardTitle className="text-xl flex items-center">
                        <CheckCircle2 className="mr-2 h-6 w-6 text-success" />
                        {contentType === "detail" ? "ìƒì„¸ ì´ë¯¸ì§€" :
                          contentType === "feed" ? "í”¼ë“œ ì´ë¯¸ì§€" :
                            contentType === "reels" ? "ë¦´ìŠ¤ ì¸ë„¤ì¼" :
                              "ìŠ¤í† ë¦¬ ì´ë¯¸ì§€"} ë³€í™˜ ì™„ë£Œ!
                      </CardTitle>
                    </CardHeader>
                    <CardContent>
                      <div className="flex justify-center">
                        <div className="w-full max-w-sm">
                          <p className="text-sm font-medium mb-2 text-center">
                            {contentType === "detail" ? "ìƒì„¸ í˜ì´ì§€ì— ë“¤ì–´ê°ˆ ì´ë¯¸ì§€ì…ë‹ˆë‹¤." :
                              contentType === "feed" ? "1:1 í”¼ë“œìš©" :
                                contentType === "reels" ? "9:16 ë¦´ìŠ¤ìš©" :
                                  "9:16 ìŠ¤í† ë¦¬ìš©"}
                          </p>
                          <div className={`w-full h-64 bg-gradient-to-br from-primary/20 to-primary-glow/20 rounded border flex items-center justify-center relative overflow-hidden`}>
                            <span className="text-sm font-medium">âœ¨ {
                              contentType === "detail" ? "ê³ í™”ì§ˆ ë³€í™˜" :
                                contentType === "feed" ? "ì •ë°©í˜• ìµœì í™”" :
                                  contentType === "reels" ? "ì„¸ë¡œí˜• ìµœì í™”" :
                                    "ìŠ¤í† ë¦¬ ìµœì í™”"
                            }</span>
                            {contentType === "story" && (
                              <div className="absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded">
                                24ì‹œê°„
                              </div>
                            )}
                          </div>
                        </div>
                      </div>
                    </CardContent>
                  </Card>

                  {/* Step 1 Navigation */}
                  {contentType && (
                    <div className="mt-6 text-center">
                      <Button
                        onClick={() => setCurrentStep(2)}
                        className="btn-large gradient-primary text-white"
                      >
                        ë‹¤ìŒ ë‹¨ê³„: {
                          contentType === "detail" ? "ìƒí’ˆ ì •ë³´ ì…ë ¥" :
                          contentType === "feed" ? "í”¼ë“œ ì½˜í…ì¸  ì„¤ì •" :
                          contentType === "reels" ? "ë¦´ìŠ¤ ì½˜í…ì¸  ì„¤ì •" :
                          "ìŠ¤í† ë¦¬ ì½˜í…ì¸  ì„¤ì •"
                        }
                        <ArrowRight className="ml-2 h-5 w-5" />
                      </Button>
                    </div>
                  )}

                </>
              ) : (
                <Card className="card-soft h-64 flex items-center justify-center">
                  <div className="text-center space-y-4">
                    <Eye className="mx-auto h-12 w-12 text-muted-foreground" />
                    <div>
                      <p className="text-lg font-medium">ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸°</p>
                      <p className="text-sm text-muted-foreground">
                        ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³  ë³´ì •ì„ ì‹¤í–‰í•˜ë©´<br />
                        ê²°ê³¼ë¥¼ ì—¬ê¸°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”
                      </p>
                    </div>
                  </div>
                </Card>
              )}
            </div>
          </div>
        )}

        {/* Step 2: Product Info and Copy Generation */}
        {currentStep === 2 && contentType === "detail" && (
          <div className="max-w-6xl mx-auto">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              {/* Left Panel - Product Info Input */}
              <div className="space-y-6">
                <Card className="card-soft">
                  <CardHeader>
                    <CardTitle className="text-xl">ìƒí’ˆ ì •ë³´ ì…ë ¥</CardTitle>
                    <CardDescription>
                      ìƒí’ˆëª…ê³¼ ê°•ì¡°í•˜ê³  ì‹¶ì€ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                    </CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <div>
                      <label className="text-sm font-medium text-foreground">ìƒí’ˆ ì´ë¦„</label>
                      <input
                        type="text"
                        value={productName}
                        onChange={(e) => setProductName(e.target.value)}
                        placeholder="ì˜ˆ: ì§€ì†ì¿¨ë§ ëƒ‰ê° ì´ë¶ˆ"
                        className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                      />
                    </div>

                    <div>
                      <label className="text-sm font-medium text-foreground">ê°•ì¡° í‚¤ì›Œë“œ (ìµœëŒ€ 3ê°œ)</label>
                      <div className="space-y-2 mt-1">
                        {keywords.map((keyword, index) => (
                          <input
                            key={index}
                            type="text"
                            value={keyword}
                            onChange={(e) => {
                              const newKeywords = [...keywords];
                              newKeywords[index] = e.target.value;
                              setKeywords(newKeywords);
                            }}
                            placeholder={`í‚¤ì›Œë“œ ${index + 1} (ì˜ˆ: ${index === 0 ? "í”„ë¦¬ë¯¸ì—„ ëƒ‰ê° ì†Œì¬" :
                              index === 1 ? "êµ­ë‚´ì‚° ì›ë‹¨" :
                                "ë§ì¶¤ ì œì‘"
                              })`}
                            className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ))}
                      </div>
                      <p className="text-xs text-muted-foreground mt-2">
                        ì…ë ¥í•œ í‚¤ì›Œë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒì„¸ ì„¤ëª…ì´ ìë™ ìƒì„±ë©ë‹ˆë‹¤
                      </p>
                    </div>

                    <Button
                      onClick={() => setShowCopyGeneration(true)}
                      className="w-full btn-large gradient-primary text-white"
                      disabled={!productName.trim()}
                    >
                      <Sparkles className="mr-2 h-5 w-5" />
                      ë§ˆì¼€íŒ… ë¬¸êµ¬ ìƒì„±í•˜ê¸°
                    </Button>
                  </CardContent>
                </Card>
              </div>

              {/* Right Panel - Generated Copy Section */}
              <div className="space-y-6">
                {showCopyGeneration && (
                  <Card className="card-soft">
                    <CardHeader>
                      <CardTitle className="text-xl flex items-center justify-between">
                        <span>ìë™ ìƒì„±ëœ ë§ˆì¼€íŒ… ë¬¸êµ¬</span>
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setIsEditing(!isEditing)}
                        >
                          <Edit2 className="mr-2 h-4 w-4" />
                          {isEditing ? "ì €ì¥" : "ìˆ˜ì •"}
                        </Button>
                      </CardTitle>
                    </CardHeader>
                    <CardContent className="space-y-4">
                      {/* Same as existing editable copy fields but generate based on productName and keywords */}
                      <div>
                        <label className="text-sm font-medium text-muted-foreground">ì œëª©</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.title || `âœ¨ ${productName || "ìƒí’ˆ"} ìƒì„¸ ì •ë³´`}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, title: e.target.value } : {
                              title: e.target.value,
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-base font-medium">{editableCopy?.title || `âœ¨ ${productName || "ìƒí’ˆ"} ìƒì„¸ ì •ë³´`}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">ì„¤ëª…</label>
                        {isEditing ? (
                          <textarea
                            value={editableCopy?.description || "í’ˆì§ˆê³¼ ë””ìì¸ì„ ëª¨ë‘ ê°–ì¶˜ í”„ë¦¬ë¯¸ì—„ ì œí’ˆì…ë‹ˆë‹¤"}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, description: e.target.value } : {
                              title: "",
                              description: e.target.value,
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            rows={2}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm leading-relaxed">{editableCopy?.description || "í’ˆì§ˆê³¼ ë””ìì¸ì„ ëª¨ë‘ ê°–ì¶˜ í”„ë¦¬ë¯¸ì—„ ì œí’ˆì…ë‹ˆë‹¤"}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">Feature 1</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.feature1 || (keywords[0] || "ê³ í’ˆì§ˆ ì†Œì¬ ì‚¬ìš©")}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, feature1: e.target.value } : {
                              title: "",
                              description: "",
                              feature1: e.target.value,
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm">{editableCopy?.feature1 || (keywords[0] || "ê³ í’ˆì§ˆ ì†Œì¬ ì‚¬ìš©")}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">Feature 2</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.feature2 || (keywords[1] || "ìš°ìˆ˜í•œ ë‚´êµ¬ì„±")}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, feature2: e.target.value } : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: e.target.value,
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm">{editableCopy?.feature2 || (keywords[1] || "ìš°ìˆ˜í•œ ë‚´êµ¬ì„±")}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">Feature 3</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.feature3 || (keywords[2] || "ì™„ë²½í•œ í•")}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, feature3: e.target.value } : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: e.target.value,
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm">{editableCopy?.feature3 || (keywords[2] || "ì™„ë²½í•œ í•")}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">Feature 4 (ì„ íƒ)</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.feature4 || ""}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, feature4: e.target.value } : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: e.target.value,
                              hashtags: "",
                              cta: ""
                            })}
                            placeholder="ì„ íƒì‚¬í•­"
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm text-muted-foreground">{editableCopy?.feature4 || "(ì„ íƒì‚¬í•­)"}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">í•´ì‹œíƒœê·¸</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #í”„ë¦¬ë¯¸ì—„ #ì¶”ì²œ`}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, hashtags: e.target.value } : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: e.target.value,
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm text-primary">{editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #í”„ë¦¬ë¯¸ì—„ #ì¶”ì²œ`}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">CTA ë¬¸êµ¬</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.cta || "ì§€ê¸ˆ ë°”ë¡œ êµ¬ë§¤í•˜ê³  íŠ¹ë³„í•œ í˜œíƒ ë°›ì•„ë³´ì„¸ìš”!"}
                            onChange={(e) => setEditableCopy(prev => prev ? { ...prev, cta: e.target.value } : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: e.target.value
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm font-medium">{editableCopy?.cta || "ì§€ê¸ˆ ë°”ë¡œ êµ¬ë§¤í•˜ê³  íŠ¹ë³„í•œ í˜œíƒ ë°›ì•„ë³´ì„¸ìš”!"}</p>
                          </div>
                        )}
                      </div>
                    </CardContent>
                  </Card>
                )}
              </div>

              {/* Navigation Buttons */}
              <div className="col-span-1 lg:col-span-2 flex justify-between pt-4">
                <Button
                  variant="outline"
                  onClick={() => setCurrentStep(1)}
                  className="btn-large"
                >
                  ì´ì „ ë‹¨ê³„
                </Button>
                <Button
                  onClick={() => setCurrentStep(3)}
                  className="btn-large gradient-primary text-white"
                  disabled={!productName.trim()}
                >
                  ë‹¤ìŒ ë‹¨ê³„: ìµœì¢… ì´ë¯¸ì§€ ìƒì„±
                  <ArrowRight className="ml-2 h-5 w-5" />
                </Button>
              </div>
            </div>
          </div>
        )}

        {/* Step 2: Feed Content Settings */}
        {currentStep === 2 && contentType === "feed" && (
          <div className="max-w-6xl mx-auto">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              {/* Left Panel - Content Settings */}
              <div className="space-y-6">
                <Card className="card-soft">
                  <CardHeader>
                    <CardTitle className="text-xl">í”¼ë“œ ì½˜í…ì¸  ì„¤ì •</CardTitle>
                    <CardDescription>
                      ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œì— ì˜¬ë¦´ ì½˜í…ì¸  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                    </CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <div>
                      <label className="text-sm font-medium text-foreground">ì œëª©</label>
                      <input
                        type="text"
                        value={productName}
                        onChange={(e) => setProductName(e.target.value)}
                        placeholder="ì˜ˆ: ìƒˆë¡œìš´ ìƒí’ˆì„ ì†Œê°œí•©ë‹ˆë‹¤!"
                        className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                      />
                    </div>
                    
                    <div>
                      <label className="text-sm font-medium text-foreground">ê°•ì¡°í•  í¬ì¸íŠ¸ (ìµœëŒ€ 3ê°œ)</label>
                      <div className="space-y-2 mt-1">
                        {keywords.map((keyword, index) => (
                          <input
                            key={index}
                            type="text"
                            value={keyword}
                            onChange={(e) => {
                              const newKeywords = [...keywords];
                              newKeywords[index] = e.target.value;
                              setKeywords(newKeywords);
                            }}
                            placeholder={`í¬ì¸íŠ¸ ${index + 1} (ì˜ˆ: ${
                              index === 0 ? "ì‹ ì œí’ˆ ì¶œì‹œ" :
                              index === 1 ? "í•œì • í• ì¸" :
                                "ë¬´ë£Œë°°ì†¡"
                            })`}
                            className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ))}
                      </div>
                    </div>

                    <Button
                      onClick={() => setShowCopyGeneration(true)}
                      className="w-full btn-large gradient-primary text-white"
                      disabled={!productName.trim()}
                    >
                      <Sparkles className="mr-2 h-5 w-5" />
                      í”¼ë“œ ë¬¸êµ¬ ìƒì„±í•˜ê¸°
                    </Button>
                  </CardContent>
                </Card>
              </div>

              {/* Right Panel - Generated Content */}
              <div className="space-y-6">
                {showCopyGeneration && (
                  <Card className="card-soft">
                    <CardHeader>
                      <CardTitle className="text-xl flex items-center justify-between">
                        <span>ìë™ ìƒì„±ëœ í”¼ë“œ ë¬¸êµ¬</span>
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setIsEditing(!isEditing)}
                        >
                          <Edit2 className="mr-2 h-4 w-4" />
                          {isEditing ? "ì €ì¥" : "ìˆ˜ì •"}
                        </Button>
                      </CardTitle>
                    </CardHeader>
                    <CardContent className="space-y-4">
                      <div>
                        <label className="text-sm font-medium text-muted-foreground">ë©”ì¸ í…ìŠ¤íŠ¸</label>
                        {isEditing ? (
                          <textarea
                            value={editableCopy?.description || "ìƒˆë¡œìš´ ìƒí’ˆì„ ì†Œê°œí•©ë‹ˆë‹¤! ë†“ì¹˜ì§€ ë§ˆì„¸ìš” âœ¨"}
                            onChange={(e) => setEditableCopy(prev => prev ? {...prev, description: e.target.value} : {
                              title: "",
                              description: e.target.value,
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            rows={3}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm leading-relaxed">{editableCopy?.description || "ìƒˆë¡œìš´ ìƒí’ˆì„ ì†Œê°œí•©ë‹ˆë‹¤! ë†“ì¹˜ì§€ ë§ˆì„¸ìš” âœ¨"}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">í•´ì‹œíƒœê·¸</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ì¸ìŠ¤íƒ€ê·¸ë¨ #í”¼ë“œ`}
                            onChange={(e) => setEditableCopy(prev => prev ? {...prev, hashtags: e.target.value} : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: e.target.value,
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm text-primary">{editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ì¸ìŠ¤íƒ€ê·¸ë¨ #í”¼ë“œ`}</p>
                          </div>
                        )}
                      </div>
                    </CardContent>
                  </Card>
                )}
              </div>

              {/* Navigation Buttons */}
              <div className="col-span-1 lg:col-span-2 flex justify-between pt-4">
                <Button
                  variant="outline"
                  onClick={() => setCurrentStep(1)}
                  className="btn-large"
                >
                  ì´ì „ ë‹¨ê³„
                </Button>
                <Button
                  onClick={() => setCurrentStep(3)}
                  className="btn-large gradient-primary text-white"
                  disabled={!productName.trim()}
                >
                  ë‹¤ìŒ ë‹¨ê³„: ìµœì¢… í”¼ë“œ ìƒì„±
                  <ArrowRight className="ml-2 h-5 w-5" />
                </Button>
              </div>
            </div>
          </div>
        )}

        {/* Step 2: Reels Content Settings */}
        {currentStep === 2 && contentType === "reels" && (
          <div className="max-w-6xl mx-auto">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              {/* Left Panel - Content Settings */}
              <div className="space-y-6">
                <Card className="card-soft">
                  <CardHeader>
                    <CardTitle className="text-xl">ë¦´ìŠ¤ ì½˜í…ì¸  ì„¤ì •</CardTitle>
                    <CardDescription>
                      ì¸ìŠ¤íƒ€ê·¸ë¨ ë¦´ìŠ¤ì— ì˜¬ë¦´ ì½˜í…ì¸  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                    </CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <div>
                      <label className="text-sm font-medium text-foreground">ì œëª©</label>
                      <input
                        type="text"
                        value={productName}
                        onChange={(e) => setProductName(e.target.value)}
                        placeholder="ì˜ˆ: ì´ê²ƒë§Œ ì•Œë©´ ë‹¹ì‹ ë„ ì „ë¬¸ê°€!"
                        className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                      />
                    </div>
                    
                    <div>
                      <label className="text-sm font-medium text-foreground">ê°•ì¡°í•  í¬ì¸íŠ¸ (ìµœëŒ€ 3ê°œ)</label>
                      <div className="space-y-2 mt-1">
                        {keywords.map((keyword, index) => (
                          <input
                            key={index}
                            type="text"
                            value={keyword}
                            onChange={(e) => {
                              const newKeywords = [...keywords];
                              newKeywords[index] = e.target.value;
                              setKeywords(newKeywords);
                            }}
                            placeholder={`í¬ì¸íŠ¸ ${index + 1} (ì˜ˆ: ${
                              index === 0 ? "ê°„ë‹¨í•œ ë°©ë²•" :
                              index === 1 ? "ë¹ ë¥¸ ê²°ê³¼" :
                                "ë†€ë¼ìš´ íš¨ê³¼"
                            })`}
                            className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ))}
                      </div>
                    </div>

                    <Button
                      onClick={() => setShowCopyGeneration(true)}
                      className="w-full btn-large gradient-primary text-white"
                      disabled={!productName.trim()}
                    >
                      <Sparkles className="mr-2 h-5 w-5" />
                      ë¦´ìŠ¤ ë¬¸êµ¬ ìƒì„±í•˜ê¸°
                    </Button>
                  </CardContent>
                </Card>
              </div>

              {/* Right Panel - Generated Content */}
              <div className="space-y-6">
                {showCopyGeneration && (
                  <Card className="card-soft">
                    <CardHeader>
                      <CardTitle className="text-xl flex items-center justify-between">
                        <span>ìë™ ìƒì„±ëœ ë¦´ìŠ¤ ë¬¸êµ¬</span>
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setIsEditing(!isEditing)}
                        >
                          <Edit2 className="mr-2 h-4 w-4" />
                          {isEditing ? "ì €ì¥" : "ìˆ˜ì •"}
                        </Button>
                      </CardTitle>
                    </CardHeader>
                    <CardContent className="space-y-4">
                      <div>
                        <label className="text-sm font-medium text-muted-foreground">ë©”ì¸ í…ìŠ¤íŠ¸</label>
                        {isEditing ? (
                          <textarea
                            value={editableCopy?.description || "ì´ê²ƒë§Œ ì•Œë©´ ë‹¹ì‹ ë„ ì „ë¬¸ê°€! ğŸ”¥ ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”"}
                            onChange={(e) => setEditableCopy(prev => prev ? {...prev, description: e.target.value} : {
                              title: "",
                              description: e.target.value,
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            rows={3}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm leading-relaxed">{editableCopy?.description || "ì´ê²ƒë§Œ ì•Œë©´ ë‹¹ì‹ ë„ ì „ë¬¸ê°€! ğŸ”¥ ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”"}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">í•´ì‹œíƒœê·¸</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ë¦´ìŠ¤ #ì¸ìŠ¤íƒ€ê·¸ë¨ #íŠ¸ë Œë“œ`}
                            onChange={(e) => setEditableCopy(prev => prev ? {...prev, hashtags: e.target.value} : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: e.target.value,
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm text-primary">{editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ë¦´ìŠ¤ #ì¸ìŠ¤íƒ€ê·¸ë¨ #íŠ¸ë Œë“œ`}</p>
                          </div>
                        )}
                      </div>
                    </CardContent>
                  </Card>
                )}
              </div>

              {/* Navigation Buttons */}
              <div className="col-span-1 lg:col-span-2 flex justify-between pt-4">
                <Button
                  variant="outline"
                  onClick={() => setCurrentStep(1)}
                  className="btn-large"
                >
                  ì´ì „ ë‹¨ê³„
                </Button>
                <Button
                  onClick={() => setCurrentStep(3)}
                  className="btn-large gradient-primary text-white"
                  disabled={!productName.trim()}
                >
                  ë‹¤ìŒ ë‹¨ê³„: ìµœì¢… ë¦´ìŠ¤ ìƒì„±
                  <ArrowRight className="ml-2 h-5 w-5" />
                </Button>
              </div>
            </div>
          </div>
        )}

        {/* Step 2: Story Content Settings */}
        {currentStep === 2 && contentType === "story" && (
          <div className="max-w-6xl mx-auto">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              {/* Left Panel - Content Settings */}
              <div className="space-y-6">
                <Card className="card-soft">
                  <CardHeader>
                    <CardTitle className="text-xl">ìŠ¤í† ë¦¬ ì½˜í…ì¸  ì„¤ì •</CardTitle>
                    <CardDescription>
                      ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ì— ì˜¬ë¦´ ì½˜í…ì¸  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”
                    </CardDescription>
                  </CardHeader>
                  <CardContent className="space-y-4">
                    <div>
                      <label className="text-sm font-medium text-foreground">ì œëª©</label>
                      <input
                        type="text"
                        value={productName}
                        onChange={(e) => setProductName(e.target.value)}
                        placeholder="ì˜ˆ: 24ì‹œê°„ í•œì • íŠ¹ê°€!"
                        className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                      />
                    </div>
                    
                    <div>
                      <label className="text-sm font-medium text-foreground">ê°•ì¡°í•  í¬ì¸íŠ¸ (ìµœëŒ€ 3ê°œ)</label>
                      <div className="space-y-2 mt-1">
                        {keywords.map((keyword, index) => (
                          <input
                            key={index}
                            type="text"
                            value={keyword}
                            onChange={(e) => {
                              const newKeywords = [...keywords];
                              newKeywords[index] = e.target.value;
                              setKeywords(newKeywords);
                            }}
                            placeholder={`í¬ì¸íŠ¸ ${index + 1} (ì˜ˆ: ${
                              index === 0 ? "í•œì • ìˆ˜ëŸ‰" :
                              index === 1 ? "24ì‹œê°„ë§Œ" :
                                "íŠ¹ë³„ í• ì¸"
                            })`}
                            className="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ))}
                      </div>
                    </div>

                    <Button
                      onClick={() => setShowCopyGeneration(true)}
                      className="w-full btn-large gradient-primary text-white"
                      disabled={!productName.trim()}
                    >
                      <Sparkles className="mr-2 h-5 w-5" />
                      ìŠ¤í† ë¦¬ ë¬¸êµ¬ ìƒì„±í•˜ê¸°
                    </Button>
                  </CardContent>
                </Card>
              </div>

              {/* Right Panel - Generated Content */}
              <div className="space-y-6">
                {showCopyGeneration && (
                  <Card className="card-soft">
                    <CardHeader>
                      <CardTitle className="text-xl flex items-center justify-between">
                        <span>ìë™ ìƒì„±ëœ ìŠ¤í† ë¦¬ ë¬¸êµ¬</span>
                        <Button
                          variant="outline"
                          size="sm"
                          onClick={() => setIsEditing(!isEditing)}
                        >
                          <Edit2 className="mr-2 h-4 w-4" />
                          {isEditing ? "ì €ì¥" : "ìˆ˜ì •"}
                        </Button>
                      </CardTitle>
                    </CardHeader>
                    <CardContent className="space-y-4">
                      <div>
                        <label className="text-sm font-medium text-muted-foreground">ë©”ì¸ í…ìŠ¤íŠ¸</label>
                        {isEditing ? (
                          <textarea
                            value={editableCopy?.description || "â° 24ì‹œê°„ë§Œ! ë†“ì¹˜ë©´ í›„íšŒí•˜ëŠ” íŠ¹ë³„ ê¸°íšŒ"}
                            onChange={(e) => setEditableCopy(prev => prev ? {...prev, description: e.target.value} : {
                              title: "",
                              description: e.target.value,
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: "",
                              cta: ""
                            })}
                            rows={3}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm leading-relaxed">{editableCopy?.description || "â° 24ì‹œê°„ë§Œ! ë†“ì¹˜ë©´ í›„íšŒí•˜ëŠ” íŠ¹ë³„ ê¸°íšŒ"}</p>
                          </div>
                        )}
                      </div>

                      <div>
                        <label className="text-sm font-medium text-muted-foreground">í•´ì‹œíƒœê·¸</label>
                        {isEditing ? (
                          <input
                            type="text"
                            value={editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ìŠ¤í† ë¦¬ #í•œì •íŠ¹ê°€`}
                            onChange={(e) => setEditableCopy(prev => prev ? {...prev, hashtags: e.target.value} : {
                              title: "",
                              description: "",
                              feature1: "",
                              feature2: "",
                              feature3: "",
                              feature4: "",
                              hashtags: e.target.value,
                              cta: ""
                            })}
                            className="w-full mt-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
                          />
                        ) : (
                          <div className="mt-1 p-3 bg-muted rounded border">
                            <p className="text-sm text-primary">{editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ìŠ¤í† ë¦¬ #í•œì •íŠ¹ê°€`}</p>
                          </div>
                        )}
                      </div>
                    </CardContent>
                  </Card>
                )}
              </div>

              {/* Navigation Buttons */}
              <div className="col-span-1 lg:col-span-2 flex justify-between pt-4">
                <Button
                  variant="outline"
                  onClick={() => setCurrentStep(1)}
                  className="btn-large"
                >
                  ì´ì „ ë‹¨ê³„
                </Button>
                <Button
                  onClick={() => setCurrentStep(3)}
                  className="btn-large gradient-primary text-white"
                  disabled={!productName.trim()}
                >
                  ë‹¤ìŒ ë‹¨ê³„: ìµœì¢… ìŠ¤í† ë¦¬ ìƒì„±
                  <ArrowRight className="ml-2 h-5 w-5" />
                </Button>
              </div>
            </div>
          </div>
        )}

        {/* Step 3: Final Detail Image */}
        {currentStep === 3 && contentType === "detail" && (
          <div className="max-w-2xl mx-auto">
            <Card className="card-soft">
              <CardHeader>
                <CardTitle className="text-xl flex items-center">
                  <CheckCircle2 className="mr-2 h-6 w-6 text-success" />
                  ìµœì¢… ìƒì„¸ ì´ë¯¸ì§€
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="border rounded-lg p-6 bg-white max-h-[600px] overflow-y-auto">
                  {/* ìƒí’ˆ ì´ë¯¸ì§€ */}
                  <div className="mb-6">
                    <img
                      src={selectedImage!}
                      alt="ìƒí’ˆ"
                      className="w-full h-64 object-contain rounded-lg"
                    />
                  </div>

                  {/* ì œëª© */}
                  <h2 className="text-2xl font-bold mb-4 text-center">
                    {editableCopy?.title || `âœ¨ ${productName || "ìƒí’ˆ"} ìƒì„¸ ì •ë³´`}
                  </h2>

                  {/* ì„¤ëª… */}
                  <p className="text-gray-600 mb-6 text-center">
                    í’ˆì§ˆê³¼ ë””ìì¸ì„ ëª¨ë‘ ê°–ì¶˜ í”„ë¦¬ë¯¸ì—„ ì œí’ˆì…ë‹ˆë‹¤
                  </p>

                  {/* Features */}
                  <div className="space-y-4 mb-6">
                    {keywords.filter(k => k.trim()).map((keyword, index) => (
                      <div key={index} className="flex items-start">
                        <div className="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                          <span className="text-primary font-bold">{index + 1}</span>
                        </div>
                        <p className="text-sm">{expandKeyword(keyword)}</p>
                      </div>
                    ))}
                  </div>

                  {/* CTA */}
                  <div className="bg-primary text-white p-4 rounded-lg text-center">
                    <p className="font-bold text-lg">
                      ğŸ“ ì§€ê¸ˆ ì£¼ë¬¸í•˜ê³  ë§Œì¡±ìŠ¤ëŸ¬ìš´ ê²½í—˜ì„ í•´ë³´ì„¸ìš”!
                    </p>
                  </div>

                  {/* í•´ì‹œíƒœê·¸ */}
                  <div className="mt-4 text-center">
                    <p className="text-sm text-primary">
                      #{productName?.replace(/\s/g, '') || "í”„ë¦¬ë¯¸ì—„ì œí’ˆ"} #í’ˆì§ˆë³´ì¥ #ê³ ê°ë§Œì¡±
                    </p>
                  </div>
                </div>

                <div className="flex justify-between mt-6">
                  <Button
                    variant="outline"
                    onClick={() => setCurrentStep(2)}
                    className="btn-large"
                  >
                    ì´ì „ ë‹¨ê³„
                  </Button>
                  <div className="flex space-x-4">
                    <Button variant="outline" className="btn-large">
                      <Download className="mr-2 h-5 w-5" />
                      ë‹¤ìš´ë¡œë“œ
                    </Button>
                    <Button
                      onClick={handleSaveToCalendar}
                      className="btn-large gradient-primary text-white"
                    >
                      <Calendar className="mr-2 h-5 w-5" />
                      ì—…ë¡œë“œ ì˜ˆì•½
                    </Button>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        )}

        {/* Step 3: Final Feed Image */}
        {currentStep === 3 && contentType === "feed" && (
          <div className="max-w-2xl mx-auto">
            <Card className="card-soft">
              <CardHeader>
                <CardTitle className="text-xl flex items-center">
                  <CheckCircle2 className="mr-2 h-6 w-6 text-success" />
                  ìµœì¢… í”¼ë“œ ì´ë¯¸ì§€
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="border rounded-lg p-6 bg-white max-h-[600px] overflow-y-auto">
                  {/* ìƒí’ˆ ì´ë¯¸ì§€ */}
                  <div className="mb-6">
                    <img
                      src={selectedImage!}
                      alt="í”¼ë“œ ì½˜í…ì¸ "
                      className="w-full h-64 object-contain rounded-lg"
                    />
                  </div>
                  
                  {/* ë©”ì¸ í…ìŠ¤íŠ¸ */}
                  <div className="text-center mb-6">
                    <p className="text-lg leading-relaxed">
                      {editableCopy?.description || "ìƒˆë¡œìš´ ìƒí’ˆì„ ì†Œê°œí•©ë‹ˆë‹¤! ë†“ì¹˜ì§€ ë§ˆì„¸ìš” âœ¨"}
                    </p>
                  </div>
                  
                  {/* í•´ì‹œíƒœê·¸ */}
                  <div className="text-center">
                    <p className="text-sm text-primary">
                      {editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ì¸ìŠ¤íƒ€ê·¸ë¨ #í”¼ë“œ`}
                    </p>
                  </div>
                </div>

                <div className="mt-6">
                  <div className="flex space-x-4">
                    <Button variant="outline" className="flex-1 btn-large">
                      <Download className="mr-2 h-5 w-5" />
                      ë‹¤ìš´ë¡œë“œ
                    </Button>
                    <Button
                      onClick={handleSaveToCalendar}
                      className="flex-1 btn-large gradient-primary text-white"
                    >
                      <Calendar className="mr-2 h-5 w-5" />
                      ì—…ë¡œë“œ ì˜ˆì•½
                    </Button>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        )}

        {/* Step 3: Final Reels Image */}
        {currentStep === 3 && contentType === "reels" && (
          <div className="max-w-2xl mx-auto">
            <Card className="card-soft">
              <CardHeader>
                <CardTitle className="text-xl flex items-center">
                  <CheckCircle2 className="mr-2 h-6 w-6 text-success" />
                  ìµœì¢… ë¦´ìŠ¤ ì¸ë„¤ì¼
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="border rounded-lg p-6 bg-white max-h-[600px] overflow-y-auto">
                  {/* ìƒí’ˆ ì´ë¯¸ì§€ - ì„¸ë¡œí˜• */}
                  <div className="mb-6 flex justify-center">
                    <div className="w-48 h-64">
                      <img
                        src={selectedImage!}
                        alt="ë¦´ìŠ¤ ì¸ë„¤ì¼"
                        className="w-full h-full object-contain rounded-lg"
                      />
                    </div>
                  </div>
                  
                  {/* ë©”ì¸ í…ìŠ¤íŠ¸ */}
                  <div className="text-center mb-6">
                    <p className="text-lg leading-relaxed font-bold">
                      {editableCopy?.description || "ì´ê²ƒë§Œ ì•Œë©´ ë‹¹ì‹ ë„ ì „ë¬¸ê°€! ğŸ”¥ ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•´ë³´ì„¸ìš”"}
                    </p>
                  </div>
                  
                  {/* í•´ì‹œíƒœê·¸ */}
                  <div className="text-center">
                    <p className="text-sm text-primary">
                      {editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ë¦´ìŠ¤ #ì¸ìŠ¤íƒ€ê·¸ë¨ #íŠ¸ë Œë“œ`}
                    </p>
                  </div>
                </div>

                <div className="mt-6">
                  <div className="flex space-x-4">
                    <Button variant="outline" className="flex-1 btn-large">
                      <Download className="mr-2 h-5 w-5" />
                      ë‹¤ìš´ë¡œë“œ
                    </Button>
                    <Button
                      onClick={handleSaveToCalendar}
                      className="flex-1 btn-large gradient-primary text-white"
                    >
                      <Calendar className="mr-2 h-5 w-5" />
                      ì—…ë¡œë“œ ì˜ˆì•½
                    </Button>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        )}

        {/* Step 3: Final Story Image */}
        {currentStep === 3 && contentType === "story" && (
          <div className="max-w-2xl mx-auto">
            <Card className="card-soft">
              <CardHeader>
                <CardTitle className="text-xl flex items-center">
                  <CheckCircle2 className="mr-2 h-6 w-6 text-success" />
                  ìµœì¢… ìŠ¤í† ë¦¬ ì´ë¯¸ì§€
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="border rounded-lg p-6 bg-white max-h-[600px] overflow-y-auto">
                  {/* ìƒí’ˆ ì´ë¯¸ì§€ - ì„¸ë¡œí˜• */}
                  <div className="mb-6 flex justify-center">
                    <div className="w-48 h-64 relative">
                      <img
                        src={selectedImage!}
                        alt="ìŠ¤í† ë¦¬ ì´ë¯¸ì§€"
                        className="w-full h-full object-contain rounded-lg"
                      />
                      <div className="absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded">
                        24ì‹œê°„
                      </div>
                    </div>
                  </div>
                  
                  {/* ë©”ì¸ í…ìŠ¤íŠ¸ */}
                  <div className="text-center mb-6">
                    <p className="text-lg leading-relaxed font-bold">
                      {editableCopy?.description || "â° 24ì‹œê°„ë§Œ! ë†“ì¹˜ë©´ í›„íšŒí•˜ëŠ” íŠ¹ë³„ ê¸°íšŒ"}
                    </p>
                  </div>
                  
                  {/* í•´ì‹œíƒœê·¸ */}
                  <div className="text-center">
                    <p className="text-sm text-primary">
                      {editableCopy?.hashtags || `#${productName.replace(/\s+/g, '')} #ìŠ¤í† ë¦¬ #í•œì •íŠ¹ê°€`}
                    </p>
                  </div>
                </div>

                <div className="mt-6">
                  <div className="flex space-x-4">
                    <Button variant="outline" className="flex-1 btn-large">
                      <Download className="mr-2 h-5 w-5" />
                      ë‹¤ìš´ë¡œë“œ
                    </Button>
                    <Button
                      onClick={handleSaveToCalendar}
                      className="flex-1 btn-large gradient-primary text-white"
                    >
                      <Calendar className="mr-2 h-5 w-5" />
                      ì—…ë¡œë“œ ì˜ˆì•½
                    </Button>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        )}
      </div>
    </div>
  );
};

export default AssetStudioPage;